FROM archlinux:latest AS builder

# Обновляем систему и устанавливаем необходимые пакеты
RUN pacman -Syu --noconfirm && pacman -S --noconfirm base-devel cmake git pkgconf libnl nftables boost sudo iproute2 jq

RUN pacman -S --noconfirm python python-pip && pip install requests --break-system-packages

WORKDIR /app

COPY /dockers/docker.py /app/docker.py

#python3 docker.py <ветка> <режим> <файл который нужно запускать>
CMD ["python3", "docker.py", "main", "client", "Client"]